<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Metasploitable_2 Exploits.ctb</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title level-1'>Metasploitable 2</h1><br/><p>IP 192.168.10.5</p><p></p><p>I use sudo netdiscovered to identify the MV IP</p><p><img src="images/31-1.png" alt="images/31-1.png" /></p></div><div class='page'><h1 class='title level-2'>Nmap scan</h1><br/><p></p><p><h2>Result from Nmap scan</h2></p><p></p><p><img src="images/32-1.png" alt="images/32-1.png" /></p><p>      </p><p>                                                                                                                                                                      </p><p>┌──(kali㉿kali)-[~]</p><p>└─$ sudo nmap -p- -sV -A -sT -O 192.168.10.5</p><p>Starting Nmap 7.94SVN ( <a href="https://nmap.org">https://nmap.org</a> ) at 2024-07-31 15:11 GMT</p><p>Nmap scan report for 192.168.10.5</p><p>Host is up (0.00095s latency).</p><p>Not shown: 65505 closed tcp ports (conn-refused)</p><p>PORT      STATE SERVICE     VERSION</p><p>21/tcp    open  ftp         vsftpd 2.3.4</p><p>|_ftp-anon: Anonymous FTP login allowed (FTP code 230)</p><p>| ftp-syst: </p><p>|   STAT: </p><p>| FTP server status:</p><p>|      Connected to 192.168.10.4</p><p>|      Logged in as ftp</p><p>|      TYPE: ASCII</p><p>|      No session bandwidth limit</p><p>|      Session timeout in seconds is 300</p><p>|      Control connection is plain text</p><p>|      Data connections will be plain text</p><p>|      vsFTPd 2.3.4 - secure, fast, stable</p><p>|_End of status</p><p>22/tcp    open  ssh         OpenSSH 4.7p1 Debian 8ubuntu1 (protocol 2.0)</p><p>| ssh-hostkey: </p><p>|   1024 60:0f:cf:e1:c0:5f:6a:74:d6:90:24:fa:c4:d5:6c:cd (DSA)</p><p>|_  2048 56:56:24:0f:21:1d:de:a7:2b:ae:61:b1:24:3d:e8:f3 (RSA)</p><p>23/tcp    open  telnet      Linux telnetd</p><p>25/tcp    open  smtp        Postfix smtpd</p><p>|_smtp-commands: metasploitable.localdomain, PIPELINING, SIZE 10240000, VRFY, ETRN, STARTTLS, ENHANCEDSTATUSCODES, 8BITMIME, DSN</p><p>53/tcp    open  domain      ISC BIND 9.4.2</p><p>| dns-nsid: </p><p>|_  bind.version: 9.4.2</p><p>80/tcp    open  http        Apache httpd 2.2.8 ((Ubuntu) DAV/2)</p><p>|_http-server-header: Apache/2.2.8 (Ubuntu) DAV/2</p><p>|_http-title: Metasploitable2 - Linux</p><p>111/tcp   open  rpcbind     2 (RPC #100000)</p><p>| rpcinfo: </p><p>|   program version    port/proto  service</p><p>|   100000  2            111/tcp   rpcbind</p><p>|   100000  2            111/udp   rpcbind</p><p>|   100003  2,3,4       2049/tcp   nfs</p><p>|   100003  2,3,4       2049/udp   nfs</p><p>|   100005  1,2,3      36226/udp   mountd</p><p>|   100005  1,2,3      59919/tcp   mountd</p><p>|   100021  1,3,4      42684/udp   nlockmgr</p><p>|   100021  1,3,4      59221/tcp   nlockmgr</p><p>|   100024  1          34758/tcp   status</p><p>|_  100024  1          46926/udp   status</p><p>139/tcp   open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)</p><p>445/tcp   open  netbios-ssn Samba smbd 3.0.20-Debian (workgroup: WORKGROUP)</p><p>512/tcp   open  exec        netkit-rsh rexecd</p><p>513/tcp   open  login?</p><p>514/tcp   open  shell       Netkit rshd</p><p>1099/tcp  open  java-rmi    GNU Classpath grmiregistry</p><p>1524/tcp  open  bindshell   Metasploitable root shell</p><p>2049/tcp  open  nfs         2-4 (RPC #100003)</p><p>2121/tcp  open  ftp         ProFTPD 1.3.1</p><p>3306/tcp  open  mysql       MySQL 5.0.51a-3ubuntu5</p><p>| mysql-info: </p><p>|   Protocol: 10</p><p>|   Version: 5.0.51a-3ubuntu5</p><p>|   Thread ID: 9</p><p>|   Capabilities flags: 43564</p><p>|   Some Capabilities: Support41Auth, ConnectWithDatabase, SupportsTransactions, Speaks41ProtocolNew, SupportsCompression, LongColumnFlag, SwitchToSSLAfterHandshake</p><p>|   Status: Autocommit</p><p>|_  Salt: &lt;tV3;j*-BClt&amp;Xl9rT-$</p><p>3632/tcp  open  distccd     distccd v1 ((GNU) 4.2.4 (Ubuntu 4.2.4-1ubuntu4))</p><p>5432/tcp  open  postgresql  PostgreSQL DB 8.3.0 - 8.3.7</p><p>| ssl-cert: Subject: commonName=ubuntu804-base.localdomain/organizationName=OCOSA/stateOrProvinceName=There is no such thing outside US/countryName=XX</p><p>| Not valid before: 2010-03-17T14:07:45</p><p>|_Not valid after:  2010-04-16T14:07:45</p><p>|_ssl-date: 2024-07-31T15:14:38+00:00; -1s from scanner time.</p><p>5900/tcp  open  vnc         VNC (protocol 3.3)</p><p>| vnc-info: </p><p>|   Protocol version: 3.3</p><p>|   Security types: </p><p>|_    VNC Authentication (2)</p><p>6000/tcp  open  X11         (access denied)</p><p>6667/tcp  open  irc         UnrealIRCd</p><p>| irc-info: </p><p>|   users: 2</p><p>|   servers: 1</p><p>|   lusers: 2</p><p>|   lservers: 0</p><p>|   server: irc.Metasploitable.LAN</p><p>|   version: Unreal3.2.8.1. irc.Metasploitable.LAN </p><p>|   uptime: 0 days, 0:04:24</p><p>|   source ident: nmap</p><p>|   source host: BAAF933C.554FE7D2.FFFA6D49.IP</p><p>|_  error: Closing Link: ubstlwgky[192.168.10.4] (Quit: ubstlwgky)</p><p>6697/tcp  open  irc         UnrealIRCd (Admin email admin@Metasploitable.LAN)</p><p>8009/tcp  open  ajp13       Apache Jserv (Protocol v1.3)</p><p>|_ajp-methods: Failed to get a valid response for the OPTION request</p><p>8180/tcp  open  http        Apache Tomcat/Coyote JSP engine 1.1</p><p>|_http-favicon: Apache Tomcat</p><p>|_http-title: Apache Tomcat/5.5</p><p>8787/tcp  open  drb         Ruby DRb RMI (Ruby 1.8; path /usr/lib/ruby/1.8/drb)</p><p>34758/tcp open  status      1 (RPC #100024)</p><p>35701/tcp open  java-rmi    GNU Classpath grmiregistry</p><p>59221/tcp open  nlockmgr    1-4 (RPC #100021)</p><p>59919/tcp open  mountd      1-3 (RPC #100005)</p><p>MAC Address: 08:00:27:66:95:73 (Oracle VirtualBox virtual NIC)</p><p>Device type: general purpose</p><p>Running: Linux 2.6.X</p><p>OS CPE: cpe:/o:linux:linux_kernel:2.6</p><p>OS details: Linux 2.6.9 - 2.6.33</p><p>Network Distance: 1 hop</p><p>Service Info: Hosts:  metasploitable.localdomain, irc.Metasploitable.LAN; OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel</p><p></p><p>Host script results:</p><p>|_smb2-time: Protocol negotiation failed (SMB2)</p><p>| smb-security-mode: </p><p>|   account_used: &lt;blank&gt;</p><p>|   authentication_level: user</p><p>|   challenge_response: supported</p><p>|_  message_signing: disabled (dangerous, but default)</p><p>|_clock-skew: mean: 1h19m59s, deviation: 2h18m34s, median: -1s</p><p>| smb-os-discovery: </p><p>|   OS: Unix (Samba 3.0.20-Debian)</p><p>|   Computer name: metasploitable</p><p>|   NetBIOS computer name: </p><p>|   Domain name: localdomain</p><p>|   FQDN: metasploitable.localdomain</p><p>|_  System time: 2024-07-31T11:13:55-04:00</p><p>|_nbstat: NetBIOS name: METASPLOITABLE, NetBIOS user: &lt;unknown&gt;, NetBIOS MAC: &lt;unknown&gt; (unknown)</p><p></p><p>TRACEROUTE</p><p>HOP RTT     ADDRESS</p><p>1   0.95 ms 192.168.10.5</p><p></p><p>OS and Service detection performed. Please report any incorrect results at <a href="https://nmap.org/submit/">https://nmap.org/submit/</a> .</p><p>Nmap done: 1 IP address (1 host up) scanned in 254.32 seconds</p><p>                                                                                                                                                                      </p><p>┌──(kali㉿kali)-[~]</p><p>└─$ </p><p></p><p></p><p><img src="images/32-2.png" alt="images/32-2.png" /></p><p></p></div><div class='page'><h1 class='title level-2'>Ftp</h1><br/><p>FTP port is open and there is an explooit for it</p><p></p><p><img src="images/33-1.png" alt="images/33-1.png" /></p><p></p><p>┌──(kali㉿kali)-[~]</p><p>└─$ searchsploit vsftpd 2.3.4               </p><p>------------------------------------------------------------------------------------------------------------------------------------ ---------------------------------</p><p> Exploit Title                                                                                                                      |  Path</p><p>------------------------------------------------------------------------------------------------------------------------------------ ---------------------------------</p><p>vsftpd 2.3.4 - Backdoor Command Execution                                                                                           | unix/remote/49757.py</p><p>vsftpd 2.3.4 - Backdoor Command Execution (Metasploit)                                                                              | unix/remote/17491.rb</p><p>------------------------------------------------------------------------------------------------------------------------------------ ---------------------------------</p><p>Shellcodes: No Results</p><p>                                                                                                                                                                      </p><p>┌──(kali㉿kali)-[~]</p><p>└─$ msfcouncle</p><p>msfcouncle: command not found</p><p>                                                                                                                                                                      </p><p>┌──(kali㉿kali)-[~]</p><p>└─$ msfcounsol</p><p>msfcounsol: command not found</p><p>                                                                                                                                                                      </p><p>┌──(kali㉿kali)-[~]</p><p>└─$ msfconsole </p><p>Metasploit tip: To save all commands executed since start up to a file, use the </p><p>makerc command</p><p>                                                  </p><p> _                                                    _</p><p>/ \    /\         __                         _   __  /_/ __                                                                                                           </p><p>| |\  / | _____   \ \           ___   _____ | | /  \ _   \ \                                                                                                          </p><p>| | \/| | | ___\ |- -|   /\    / __\ | -__/ | || | || | |- -|                                                                                                         </p><p>|_|   | | | _|__  | |_  / -\ __\ \   | |    | | \__/| |  | |_                                                                                                         </p><p>      |/  |____/  \___\/ /\ \\___/   \/     \__|    |_\  \___\                                                                                                        </p><p>                                                                                                                                                                      </p><p></p><p>       =[ metasploit v6.3.55-dev                          ]</p><p>+ -- --=[ 2397 exploits - 1235 auxiliary - 422 post       ]</p><p>+ -- --=[ 1391 payloads - 46 encoders - 11 nops           ]</p><p>+ -- --=[ 9 evasion                                       ]</p><p></p><p>Metasploit Documentation: <a href="https://docs.metasploit.com/">https://docs.metasploit.com/</a></p><p></p><p>msf6 &gt; searchsploit vsftpd 2.3.4</p><p>[*] exec: searchsploit vsftpd 2.3.4</p><p></p><p>------------------------------------------------------------------------------------------------------------------------------------ ---------------------------------</p><p> Exploit Title                                                                                                                      |  Path</p><p>------------------------------------------------------------------------------------------------------------------------------------ ---------------------------------</p><p>vsftpd 2.3.4 - Backdoor Command Execution                                                                                           | unix/remote/49757.py</p><p>vsftpd 2.3.4 - Backdoor Command Execution (Metasploit)                                                                              | unix/remote/17491.rb</p><p>------------------------------------------------------------------------------------------------------------------------------------ ---------------------------------</p><p>Shellcodes: No Results</p><p>msf6 &gt; options</p><p></p><p>Global Options:</p><p>===============</p><p></p><p>   Option             Current Setting    Description</p><p>   ------             ---------------    -----------</p><p>   ConsoleLogging     false              Log all console input and output</p><p>   LogLevel           0                  Verbosity of logs (default 0, max 3)</p><p>   MeterpreterPrompt  meterpreter        The meterpreter prompt string</p><p>   MinimumRank        0                  The minimum rank of exploits that will run without explicit confirmation</p><p>   Prompt             msf6               The prompt string</p><p>   PromptChar         &gt;                  The prompt character</p><p>   PromptTimeFormat   %Y-%m-%d %H:%M:%S  Format for timestamp escapes in prompts</p><p>   SessionLogging     false              Log all input and output for sessions</p><p>   SessionTlvLogging  false              Log all incoming and outgoing TLV packets</p><p>   TimestampOutput    false              Prefix all console output with a timestamp</p><p></p><p>Starting the Metasploit Framework</p><p></p><p><img src="images/33-2.png" alt="images/33-2.png" /></p><p></p><p></p><p>Search for Exploit on Metasploit</p><p></p><p><img src="images/33-3.png" alt="images/33-3.png" /></p><p></p><p></p><p>Setting the Exploit</p><p></p><p><img src="images/33-4.png" alt="images/33-4.png" /></p><p></p><p>More setting</p><p></p><p><img src="images/33-5.png" alt="images/33-5.png" /></p><p></p><p></p><p>Exploit FTP and test “ls” command</p><p></p><p><img src="images/33-6.png" alt="images/33-6.png" /></p><p></p><p></p></div><div class='page'><h1 class='title level-3'>Metasploit exploit</h1><br/><p>Here I use metasploit framework to exploit the FTP </p><p></p><p>To start metasploit</p><p></p><p><img src="images/34-1.png" alt="images/34-1.png" /></p><p></p><p>Search for the exploit in Metasploit</p><p></p><p><img src="images/34-2.png" alt="images/34-2.png" /></p><p></p><p>use Options</p><p></p><p><img src="images/34-3.png" alt="images/34-3.png" /></p><p></p><p>configure my payload</p><p></p><p><img src="images/34-4.png" alt="images/34-4.png" /></p><p></p><p>exploit FTP</p><p></p><p><img src="images/34-5.png" alt="images/34-5.png" /></p><p></p><p>Output from 192.168.10.5</p><p></p><p></p><p>whoami</p><p>root</p><p>cd home</p><p>ls</p><p>ftp</p><p>msfadmin</p><p>service</p><p>user</p><p>cd ftp</p><p>ls</p><p>ls -al</p><p>total 8</p><p>drwxr-xr-x 2 root nogroup 4096 Mar 17  2010 .</p><p>drwxr-xr-x 6 root root    4096 Apr 16  2010 ..</p><p>cd ..</p><p>ls</p><p>ftp</p><p>msfadmin</p><p>service</p><p>user</p><p>cd service</p><p>ls</p><p>ls -ls</p><p>total 0</p><p>ls -la</p><p>total 20</p><p>drwxr-xr-x 2 service service 4096 Apr 16  2010 .</p><p>drwxr-xr-x 6 root    root    4096 Apr 16  2010 ..</p><p>-rw-r--r-- 1 service service  220 Apr 16  2010 .bash_logout</p><p>-rw-r--r-- 1 service service 2928 Apr 16  2010 .bashrc</p><p>-rw-r--r-- 1 service service  586 Apr 16  2010 .profile</p><p>cd .profile</p><p>sh: line 20: cd: .profile: Not a directory</p><p>cdmod +x .profile</p><p>sh: line 21: cdmod: command not found</p><p>chown +x .profile</p><p>chown: invalid user: `+x&#39;</p><p>cd ..</p><p>ls</p><p>ftp</p><p>msfadmin</p><p>service</p><p>user</p><p>cd msfadmin</p><p>ls</p><p>vulnerable</p><p>cd vulnerable</p><p>ls</p><p>mysql-ssl</p><p>samba</p><p>tikiwiki</p><p>twiki20030201</p><p>ls -la</p><p>total 24</p><p>drwxr-xr-x 6 msfadmin msfadmin 4096 Apr 27  2010 .</p><p>drwxr-xr-x 5 msfadmin msfadmin 4096 May 20  2012 ..</p><p>drwxr-xr-x 3 msfadmin msfadmin 4096 Apr 28  2010 mysql-ssl</p><p>drwxr-xr-x 5 msfadmin msfadmin 4096 Apr 28  2010 samba</p><p>drwxr-xr-x 2 msfadmin msfadmin 4096 Apr 19  2010 tikiwiki</p><p>drwxr-xr-x 3 msfadmin msfadmin 4096 Apr 16  2010 twiki20030201</p><p>cd mysql-ssl</p><p>ls</p><p>my.cnf</p><p>mysql-keys</p><p>mysqld.gdb</p><p>yassl-1.9.8.zip</p><p>ls -la</p><p>total 956</p><p>drwxr-xr-x 3 msfadmin msfadmin   4096 Apr 28  2010 .</p><p>drwxr-xr-x 6 msfadmin msfadmin   4096 Apr 27  2010 ..</p><p>-rw-r--r-- 1 msfadmin msfadmin    428 Jan 26  2010 my.cnf</p><p>drwx------ 2 msfadmin msfadmin   4096 Jan 27  2010 mysql-keys</p><p>-rw-r--r-- 1 msfadmin msfadmin    226 Apr 19  2010 mysqld.gdb</p><p>-rw-r--r-- 1 msfadmin msfadmin 951427 Apr 19  2010 yassl-1.9.8.zip</p><p>cd myql-keys</p><p>sh: line 33: cd: myql-keys: No such file or directory</p><p>cd mysql-keys</p><p>ls -la</p><p>total 40</p><p>drwx------ 2 msfadmin msfadmin 4096 Jan 27  2010 .</p><p>drwxr-xr-x 3 msfadmin msfadmin 4096 Apr 28  2010 ..</p><p>-rw------- 1 msfadmin msfadmin 1480 Jan 26  2010 ca-cert.pem</p><p>-rw------- 1 msfadmin msfadmin 1675 Jan 26  2010 ca-key.pem</p><p>-rw------- 1 msfadmin msfadmin 1164 Jan 26  2010 client-cert.pem</p><p>-rw------- 1 msfadmin msfadmin 1679 Jan 26  2010 client-key.pem</p><p>-rw------- 1 msfadmin msfadmin  980 Jan 26  2010 client-req.pem</p><p>-rw------- 1 msfadmin msfadmin 1164 Jan 26  2010 server-cert.pem</p><p>-rw------- 1 msfadmin msfadmin 1679 Jan 26  2010 server-key.pem</p><p>-rw------- 1 msfadmin msfadmin  980 Jan 26  2010 server-req.pem</p><p>cd ..</p><p>ls</p><p>my.cnf</p><p>mysql-keys</p><p>mysqld.gdb</p><p>yassl-1.9.8.zip</p><p>cd /home/msfconfig</p><p>sh: line 38: cd: /home/msfconfig: No such file or directory</p><p>cd ..</p><p>ls</p><p>mysql-ssl</p><p>samba</p><p>tikiwiki</p><p>twiki20030201</p><p>cd ..</p><p>ls</p><p>vulnerable</p><p>cd ..</p><p>ls</p><p>ftp</p><p>msfadmin</p><p>service</p><p>user</p><p>cd user</p><p>ls</p><p>ls -la</p><p>total 28</p><p>drwxr-xr-x 3 user user 4096 May  7  2010 .</p><p>drwxr-xr-x 6 root root 4096 Apr 16  2010 ..</p><p>-rw------- 1 user user  165 May  7  2010 .bash_history</p><p>-rw-r--r-- 1 user user  220 Mar 31  2010 .bash_logout</p><p>-rw-r--r-- 1 user user 2928 Mar 31  2010 .bashrc</p><p>-rw-r--r-- 1 user user  586 Mar 31  2010 .profile</p><p>drwx------ 2 user user 4096 May  7  2010 .ssh</p><p></p></div><div class='page'><h1 class='title level-2'>VNC</h1><br/><p>Open VNC exploit with metasploit framework</p><p></p><p>Checking for VNC 3.3 exploit</p><p> </p><p><img src="images/35-1.png" alt="images/35-1.png" /></p><p></p><p>Search for VNC exploit on metasploit</p><p></p><p><img src="images/35-2.png" alt="images/35-2.png" /></p><p></p><p>Selecting the VNC scanner</p><p></p><p><img src="images/35-3.png" alt="images/35-3.png" /></p><p></p><p>Setting the exploit and exploit VNC</p><p></p><p><img src="images/35-4.png" alt="images/35-4.png" /></p><p></p><p>The result shows that the VNC Password is “password”</p><p></p></div><div class='page'><h1 class='title level-2'>Smb</h1><br/><p>Search for Smb exploit</p><p><img src="images/109-1.png" alt="images/109-1.png" /></p><p></p><p>search for exploit on metasploit</p><p></p><p><img src="images/109-2.png" alt="images/109-2.png" /></p><p></p><p>Showing exploit options</p><p></p><p><img src="images/109-3.png" alt="images/109-3.png" /></p><p></p><p>Setting exploit options and run exploit</p><p></p><p><img src="images/109-4.png" alt="images/109-4.png" /></p><p></p></div>
</body>
</html>
